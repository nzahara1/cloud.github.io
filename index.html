<p><strong>Movie Recommendation System</strong></p>
<p>&nbsp;</p>
<p><strong>Team</strong><span style="font-weight: 400;">&nbsp;</span></p>
<p><span style="font-weight: 400;">Noor Zahara</span></p>
<p><span style="font-weight: 400;">Riddhi Patil</span></p>
<p><span style="font-weight: 400;">Sharmistha Haldar</span></p>
<p>&nbsp;</p>
<p><strong>Introduction</strong></p>
<p><span style="font-weight: 400;">With this project we aim to provide the movie recommendation for the user based on the movies liked by similar users. Also, we provide the movie rating for the searched movie based on the reviews provided by users on popular movie review websites such as IMDB and Tumblr.</span></p>
<p>&nbsp;</p>
<p><span style="font-weight: 400;">For this project we plan to use the movie dataset (more information in the next section), preprocess the dataset to remove any abnormality or outliers. For the movie searched by the user we will make a hit to reviews page on IMDB for that particular movie to fetch the reviews of that particular movie from the above mentioned movie review websites. After redirecting to the review pages of that particular movie, perform web scraping to get the review content and stored it in a file against the movie id.&nbsp;</span></p>
<p>&nbsp;</p>
<p><span style="font-weight: 400;">Next, we will analyse the Sentiment for the review by using the words in the review text. We will rate the word as per its meaning from +5 (positive review) to -5 (negative review) using the dictionary AFINN. The AFINN is a dictionary which consists of 2500 words which are rated from +5 to -5 depending on their meaning. We will be using the dictionary from the following link: </span><a href="https://raw.githubusercontent.com/fnielsen/afinn/master/afinn/data/AFINN-111.txt"><span style="font-weight: 400;">AFINN-111.txt</span><span style="font-weight: 400;">.</span></a><span style="font-weight: 400;"> Once the sentiment analysis is performed, we will average the rating of words per review to determine if the review is negative or positive and assign appropriate &ldquo;stars&rdquo; from the range 0 to 5. For negative average rating we will assign 1 star.</span></p>
<p>&nbsp;</p>
<p><span style="font-weight: 400;">Next we implement Collaborative filtering to display the list the top rated movies for particular user whose movie likings are similar to other users. We used cosine similarity matrix to determine the similar users based on the ratings given by the users to the movies.</span></p>
<p><span style="font-weight: 400;"><br /></span><span style="font-weight: 400;">Recommendation techniques &ndash; Content, Collaborative and Hybrid models </span> <span style="font-weight: 400;"><br /></span><span style="font-weight: 400;">Java Web services APIs to pull information from external sources </span></p>
<p><span style="font-weight: 400;">Spark - Python .</span></p>
<p><span style="font-weight: 400;">Sentiment Analysis using Java</span></p>
<p><br /><br /></p>
<p><strong>Dataset Details </strong></p>
<p><span style="font-weight: 400;">We will be using the datasets available on the website </span><a href="https://grouplens.org/datasets/movielens/"><span style="font-weight: 400;">https://grouplens.org/datasets/movielens/</span></a></p>
<p><span style="font-weight: 400;">the data is collected from the MovieLens website </span><span style="font-weight: 400;">(</span><a href="http://movielens.org/"><span style="font-weight: 400;">http://movielens.org</span></a><span style="font-weight: 400;">). The dataset comprises of three parts:</span></p>
<ol>
<li><span style="font-weight: 400;"> Movie lens data &ndash; contains users.csv, ratings.csv, movies.csv, tags.csv&nbsp;</span></li>
</ol>
<p>&nbsp;</p>
<p><strong>ratings.csv</strong><span style="font-weight: 400;">: Each line of this file after the header row represents one rating of one movie by one user, and has the following format:&nbsp;</span></p>
<p><span style="font-weight: 400;">userId,movieId,rating,timestamp</span></p>
<p><span style="font-weight: 400;">In our prototype recommendation engine we are ignoring timestamp from ratings.csv</span></p>
<p>&nbsp;</p>
<p><strong>movies.csv</strong><span style="font-weight: 400;">: Structure of movies.csv is as follows:&nbsp;</span></p>
<p><span style="font-weight: 400;">tmdbMovieID, Movie Name and Year, Generes in | separated format. Each movie can contain one or more genres of the following genres:&nbsp;</span></p>
<ol>
<li><span style="font-weight: 400;"> Action</span></li>
<li><span style="font-weight: 400;"> Adventure</span></li>
<li><span style="font-weight: 400;"> Animation</span></li>
<li><span style="font-weight: 400;"> Children</span></li>
<li><span style="font-weight: 400;"> Comedy</span></li>
<li><span style="font-weight: 400;"> Crime</span></li>
<li><span style="font-weight: 400;"> Documentary</span></li>
<li><span style="font-weight: 400;"> Drama</span></li>
<li><span style="font-weight: 400;"> Fantasy</span></li>
<li><span style="font-weight: 400;"> Film-Noir</span></li>
<li><span style="font-weight: 400;"> Horror</span></li>
<li><span style="font-weight: 400;"> Musical</span></li>
<li><span style="font-weight: 400;"> Mystery</span></li>
<li><span style="font-weight: 400;"> Romance</span></li>
<li><span style="font-weight: 400;"> Sci-Fi</span></li>
<li><span style="font-weight: 400;"> Thriller</span></li>
<li><span style="font-weight: 400;"> War</span></li>
<li><span style="font-weight: 400;"> Western</span></li>
<li><span style="font-weight: 400;"> IMAX</span></li>
</ol>
<p><span style="font-weight: 400;">If no genres are available then genre will be 20. (no genres listed)&nbsp;</span></p>
<p><span style="font-weight: 400;">Currently the system doesn&rsquo;t use the Year information.</span></p>
<p><br /><br /></p>
<p><strong>links.csv:</strong><span style="font-weight: 400;"> Contains the identifiers that can be used to link to other sources of movie data are&nbsp; contained in the file `links.csv`. Each line of this file after the header row represents one movie, and has the following format:&nbsp;</span></p>
<p><span style="font-weight: 400;">movieId,imdbId,tmdbId&nbsp;</span></p>
<p><span style="font-weight: 400;">Currently the system doesn&rsquo;t use tags.csv file.&nbsp;</span></p>
<p><strong>Algorithms and&nbsp; Techniques Used</strong></p>
<p><strong>Collaborative Filtering based Recommendation</strong><span style="font-weight: 400;"> - </span><span style="font-weight: 400;">&nbsp;For each user, recommender systems recommend items based on how similar users liked the item. Let&rsquo;s say Alice and Bob have similar interests in video games. Alice recently played and enjoyed the game </span><a href="http://www.zelda.com/breath-of-the-wild/"><span style="font-weight: 400;">Legend of Zelda: Breath of the Wild</span></a><span style="font-weight: 400;">. Bob has not played this game, but because the system has learned that Alice and Bob have similar tastes, it recommends this game to Bob. In addition to user similarity, recommender systems can also perform collaborative filtering using item similarity (&ldquo;Users who liked this item also liked X&rdquo;). The idea behind collaborative filtering is to recommend new items based on the similarity of users. Cosine similarity is used to measure the similarity between users.</span></p>
<p><strong>Algorithm (Neighborhood similarity)</strong><span style="font-weight: 400;"> - We have calculated the user similarity based on the neighbourhood technique and used the matrix factorization technique(SVD) to predict the missing values for user-movie ratings. Using cosine similarity we create a user to user similarity matrix. To recommending movies for a given user we look at user to user similarity matrix and extract top 5 similar users. Using the user&rsquo;s id we get all the movies rated by those top users and multiply the rating with the similarity value. We then sort the movies based on new ratings and recommend top 10 movies.</span></p>
<p><strong>Frameworks used</strong></p>
<p><strong>Hadoop</strong><span style="font-weight: 400;"> - </span><span style="font-weight: 400;">Apache Hadoop is a collection of open-source software utilities that facilitate using a network of many computers to solve problems involving massive amounts of data and computation. It provides a software framework for distributed storage and processing of big data using the MapReduce programming model</span></p>
<p><strong>Spark</strong><span style="font-weight: 400;"> - </span><span style="font-weight: 400;">Apache Spark is an open-source distributed general-purpose cluster-computing framework. Spark provides an interface for programming entire clusters with implicit data parallelism and fault tolerance.</span></p>
<p><br /><br /></p>
<p><strong>External Libraries Used</strong></p>
<p><strong>Jsoup-1.12.1.jar</strong><strong> - </strong><span style="font-weight: 400;">Jsoup is a java html parser. It is a java library that is used to parse HTML document. Jsoup provides api to extract and manipulate data from URL or HTML file. It uses DOM, CSS and Jquery-like methods for extracting and manipulating file.</span><span style="font-weight: 400;"> We used this jar for web scraping to get the reviews from IMDB website.</span></p>
<p><strong>Scipy.sparse.linalg.svds</strong><strong> - </strong><span style="font-weight: 400;">This library consists of an iterative procedure to find the SVD decomposition by reducing the problem to an eigendecomposition on the array. This method is very effective when the input matrix is sparse or only the largest singular values are required.</span></p>
<p>&nbsp;</p>
<p><strong>Project Context</strong></p>
<p>&nbsp;</p>
<p><span style="font-weight: 400;">The purpose of choosing this project is to get an insight about recommendation engine in general. Through this course of implementation we intend to get hands on experience with web crawling, link analysis and also working as a team. We find this system really interesting since it helps users make their decision and also enforce more research on products they plan to buy and also feel satisfied after a decision is made. It also helps record the quality of interactions between users and items. </span><span style="font-weight: 400;">Recommender systems differ in the way they analyze the data sources to develop notions of affinity between users and items, which can be used to identify well-matched pairs.&nbsp;</span></p>
<p>&nbsp;</p>
<p><strong>Performance Evaluation</strong></p>
<p>&nbsp;</p>
<p><strong>Sentiment analysis for reviews:</strong></p>
<p>&nbsp;</p>
<p><span style="font-weight: 400;">We were able to achieve fairly good execution time from scraping the reviews and performing&nbsp; sentiment analysis in mapreduce of around 5-6mins.</span><strong>&nbsp;</strong></p>
<p><span style="font-weight: 400;">We are using AFINN-111.txt dictionary which has the list of words along with the score from -1 to 5 indicating the negativity or positivity of the word. Since, this dictionary has limited words (around 2477 words), accurately rating the review is not possible. We were not able to capture the accurate score for the reviews. Also, as we are assigning the scores based on the words used in the reviews without applying algorithm like natural language processing, genetic algorithms etc. the resultant scores slightly differs.&nbsp;</span></p>
<p><span style="font-weight: 400;">Steps in evaluation:</span></p>
<ol>
<li style="font-weight: 400;"><span style="font-weight: 400;">Implemented map function to get the movie_id from movies.csv file for the searched movie.</span></li>
<li style="font-weight: 400;"><span style="font-weight: 400;">Output of this map function was used as input to another map function to get the IMDB id from the movie_id in links.csv file.</span></li>
<li style="font-weight: 400;"><span style="font-weight: 400;">Output of this function acted as input for another map function which performed web scraping using external library called jsoup.jar. The reviews were scraped from the IMDB website for that particular IMDB id and created reviews.txt file.</span></li>
<li style="font-weight: 400;"><span style="font-weight: 400;">This file was consumed by another map function to perform sentiment analysis on the reviews. Each review was rated on the scale of -5 to 5 using AFINN-111.txt file which has the list of words along with the score for each word.</span></li>
<li style="font-weight: 400;"><span style="font-weight: 400;">Finally this ratings were passed to reduce function which counted the number of positive reviews and calculated overall percentage of movie loved by IMDB users.</span></li>
</ol>
<img src="sentiment.jpg" alt="No Image"/>
<p>&nbsp;</p>
<p><span style="font-weight: 400;">&nbsp;</span></p>
<p><br /><br /><br /></p>
<p><strong>User Similarity Matrix:</strong></p>
<p><span style="font-weight: 400;">While creating the user similarity matrix for all the users, the system&rsquo;s performance was degrading and was taking a long time to execute. Most of the jobs where out of resources and result in failing of tasks due to long wait period for resources. So we have restricted the user similarity matrix for first 100 users.&nbsp; We have noticed that the system&rsquo;s performance was good for 100 users and we were getting results in less than 10 mins.</span></p>
<p><span style="font-weight: 400;">As the user and movie rating matrix is sparse, we have implemented factorization method to handle missing ratings. For this project we have used the K value as &ldquo;50&rdquo; in Singular value decomposition (SVD) factorization which has improved the performance.</span></p>
<p>&nbsp;</p>
<p><strong>Result Evaluation:</strong></p>
<p>&nbsp;</p>
<img src="similarity.png" alt="No Image"/>
<p><span style="font-weight: 400;">The movies rated by the User id #3 are</span></p>
<p>&nbsp;</p>
<p><span style="font-weight: 400;">The Recommended Movies for user #3 are:</span></p>
<table>
<tbody>
<tr>
<td>
<p><span style="font-weight: 400;">Movie Id</span></p>
</td>
<td>
<p><span style="font-weight: 400;">Title</span></p>
</td>
<td>
<p><span style="font-weight: 400;">Genres</span></p>
</td>
</tr>
<tr>
<td>
<p><span style="font-weight: 400;">142</span></p>
</td>
<td>
<p><span style="font-weight: 400;">Shadows (Cienie) (1988)</span></p>
</td>
<td>
<p><span style="font-weight: 400;">Drama</span></p>
</td>
</tr>
<tr>
<td>
<p><span style="font-weight: 400;">345</span></p>
</td>
<td>
<p><span style="font-weight: 400;">Adventures of Priscilla, Queen of the Desert, The (1994)</span></p>
</td>
<td>
<p><span style="font-weight: 400;">Comedy|Drama</span></p>
</td>
</tr>
<tr>
<td>
<p><span style="font-weight: 400;">441</span></p>
</td>
<td>
<p><span style="font-weight: 400;">Dazed and Confused (1993)</span></p>
</td>
<td>
<p><span style="font-weight: 400;">Comedy</span></p>
</td>
</tr>
<tr>
<td>
<p><span style="font-weight: 400;">762</span></p>
</td>
<td>
<p><span style="font-weight: 400;">Striptease (1996)</span></p>
</td>
<td>
<p><span style="font-weight: 400;">Comedy|Crime</span></p>
</td>
</tr>
<tr>
<td>
<p><span style="font-weight: 400;">1204</span></p>
</td>
<td>
<p><span style="font-weight: 400;">Lawrence of Arabia (1962)</span></p>
</td>
<td>
<p><span style="font-weight: 400;">Adventure|Drama|War</span></p>
</td>
</tr>
<tr>
<td>
<p><span style="font-weight: 400;">1372</span></p>
</td>
<td>
<p><span style="font-weight: 400;">Star Trek VI: The Undiscovered Country (1991)</span></p>
</td>
<td>
<p><span style="font-weight: 400;">Action|Mystery|Sci-Fi</span></p>
</td>
</tr>
<tr>
<td>
<p><span style="font-weight: 400;">2100</span></p>
</td>
<td>
<p><span style="font-weight: 400;">Splash (1984)</span></p>
</td>
<td>
<p><span style="font-weight: 400;">Comedy|Fantasy|Romance</span></p>
</td>
</tr>
<tr>
<td>
<p><span style="font-weight: 400;">2641</span></p>
</td>
<td>
<p><span style="font-weight: 400;">Superman II (1980)</span></p>
</td>
<td>
<p><span style="font-weight: 400;">Action|Sci-Fi</span></p>
</td>
</tr>
<tr>
<td>
<p><span style="font-weight: 400;">3386</span></p>
</td>
<td>
<p><span style="font-weight: 400;">JFK (1991)</span></p>
</td>
<td>
<p><span style="font-weight: 400;">Drama|Mystery|Thriller</span></p>
</td>
</tr>
<tr>
<td>
<p><span style="font-weight: 400;">3937</span></p>
</td>
<td>
<p><span style="font-weight: 400;">Runaway (1984)</span></p>
</td>
<td>
<p><span style="font-weight: 400;">Sci-Fi|Thriller</span></p>
</td>
</tr>
</tbody>
</table>
<p><br /><br /></p>
<p><span style="font-weight: 400;">As we can see that User #3 mostly likes &ldquo;Drama, Action and Thriller&rdquo; movies and the recommended movies&nbsp; are closely related to the genres of user #3.</span></p>
<p><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /></p>
<p><strong>Work Division</strong></p>
<p>&nbsp;</p>
<table>
<tbody>
<tr>
<td>
<p><strong>Sr.No</strong></p>
</td>
<td>
<p><strong>Task</strong></p>
</td>
<td>
<p><strong>Team Member</strong></p>
</td>
</tr>
<tr>
<td>
<p><span style="font-weight: 400;">1.</span></p>
</td>
<td>
<p><span style="font-weight: 400;">Data gathering and cleaning</span></p>
</td>
<td>
<p><span style="font-weight: 400;">Noor/Riddhi/Sharmistha</span></p>
</td>
</tr>
<tr>
<td>
<p><span style="font-weight: 400;">2.</span></p>
</td>
<td>
<p><span style="font-weight: 400;">Calculation of rating implementation in mapreduce discussion steps</span></p>
</td>
<td>
<p><span style="font-weight: 400;">Noor/Riddhi/Sharmistha</span></p>
</td>
</tr>
<tr>
<td>
<p><span style="font-weight: 400;">3.</span></p>
</td>
<td>
<p><span style="font-weight: 400;">Implement mapreduce chain to get the movie details and connect different components of the project</span></p>
</td>
<td>
<p><span style="font-weight: 400;">Riddhi</span></p>
</td>
</tr>
<tr>
<td>
<p><span style="font-weight: 400;">4.</span></p>
</td>
<td>
<p><span style="font-weight: 400;">Web scraping to read reviews for given output from the review page</span></p>
</td>
<td>
<p><span style="font-weight: 400;">Noor</span></p>
</td>
</tr>
<tr>
<td>
<p><span style="font-weight: 400;">5.</span></p>
</td>
<td>
<p><span style="font-weight: 400;">Sentiment analysis on the reviews</span></p>
</td>
<td>
<p><span style="font-weight: 400;">Noor</span></p>
</td>
</tr>
<tr>
<td>
<p><span style="font-weight: 400;">6.&nbsp;</span></p>
</td>
<td>
<p><span style="font-weight: 400;">Calculating the rating for the movie searched</span></p>
</td>
<td>
<p><span style="font-weight: 400;">Riddhi</span></p>
</td>
</tr>
<tr>
<td>
<p><span style="font-weight: 400;">7.</span></p>
</td>
<td>
<p><span style="font-weight: 400;">Collaborative filtering algorithm implementation discussion steps</span></p>
</td>
<td>
<p><span style="font-weight: 400;">Noor/Riddhi/Sharmistha</span></p>
</td>
</tr>
<tr>
<td>
<p><span style="font-weight: 400;">8.</span></p>
</td>
<td>
<p><span style="font-weight: 400;">Collaborative filtering algorithm implementation in spark</span></p>
</td>
<td>
<p><span style="font-weight: 400;">Sharmistha</span></p>
</td>
</tr>
<tr>
<td>
<p><span style="font-weight: 400;">9.</span></p>
</td>
<td>
<p><span style="font-weight: 400;">Filter the result of top 10 highly rated movies of users having similar taste</span></p>
</td>
<td>
<p><span style="font-weight: 400;">Sharmistha</span></p>
</td>
</tr>
</tbody>
</table>
<p><br /><br /></p>
<p><strong>Challenges/ Issues Faced</strong></p>
<p>&nbsp;</p>
<ol>
<li style="font-weight: 400;"><span style="font-weight: 400;">We tried spending some time to implement a model using Matrix Factorization but were not successful and hence proceeded with other ideas like Sentiment Analysis</span></li>
<li style="font-weight: 400;"><span style="font-weight: 400;">In the initial plan we planned to use K-Means clustering technique to identify the closest set of users by using canopy approach. However, even this approach suffered from problems clusters of non-uniform sizes as we have no control over the initial centers. Therefore, we decided to use SVD technique and cosine similarity approach to identify the similar set of users</span></li>
<li style="font-weight: 400;"><span style="font-weight: 400;">The driver program also had to handle some invalid IMDB ids for some movies in the MovieLens data set</span></li>
<li style="font-weight: 400;"><span style="font-weight: 400;">Understanding the SVD and filling the sparse user-item matrix took time</span></li>
<li style="font-weight: 400;"><span style="font-weight: 400;">To make parsing easier for later stages of sentiment analysis, we had to place each movie review retrieved from web scraping on a newline&nbsp;&nbsp;</span></li>
</ol>
<p>&nbsp;</p>
<p><strong>Things implemented and Future Improvements</strong></p>
<p><strong>Things Implemented/ Accomplished&nbsp;</strong></p>
<p><span style="font-weight: 400;">Constructing Utility Matrix</span></p>
<p><span style="font-weight: 400;">Sourcing Data from other external sources</span></p>
<p><span style="font-weight: 400;">Sentiment Analysis and conversion of descriptive data into numerical rating</span></p>
<p><span style="font-weight: 400;">Web scraping to fetch the reviews from IMDB sites.</span></p>
<p><span style="font-weight: 400;">Recommend movies based on collaborative recommendation technique</span></p>
<p><strong>Future Improvements:</strong></p>
<ol>
<li style="font-weight: 400;"><span style="font-weight: 400;">As the user-movie rating matrix is sparse we will use sentiment analysis to fill up the missing ratings in order to reduce the rmse of user-similarity matrix.&nbsp;</span></li>
<li style="font-weight: 400;"><span style="font-weight: 400;">Give better meaningful suggestions to the users based on the genre of the movie, time period of the movie searched, cast, director etc.</span></li>
<li style="font-weight: 400;"><span style="font-weight: 400;">Movie ratings can be calculated using Sentiment Analysis instead of depending on the values from the predefined dataset.</span></li>
<li style="font-weight: 400;"><span style="font-weight: 400;">Include natural language processing for Sentiment Analysis to achieve accurate ratings by better understanding the user reviews.&nbsp;</span></li>
</ol>
<p><strong>Conclusion</strong></p>
<p><span style="font-weight: 400;">With enough data, collaborative filtering provides a powerful way for data scientists to recommend new products or items to users. If you have well-detailed metadata about your products, you could also use a content-based approach to recommendations.</span></p>
